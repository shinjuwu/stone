# 🎮 Plinko 測試程式使用指南

## 🚀 快速開始

### 編譯和運行
```bash
# 1. 編譯優化版本
go build -tags auto -o plinko_optimized

# 2. 運行命令行版本 (測試修復)
./plinko_optimized

# 3. 編譯 GUI 版本 (Windows)
# 需要在 Windows 環境或安裝交叉編譯工具
CGO_ENABLED=1 GOOS=windows go build -o dytRobot_optimized.exe
```

## 🎯 界面功能說明

### 🎲 Plinko 測試控制台

#### 第一行：💰 遊戲控制
- **籌碼選擇**: 選擇投注金額等級
  - `最小注 (10金)` - 適合新手測試
  - `小注 (50金)` - 日常測試推薦  
  - `中注 (100金)` - 中等風險測試
  - `大注 (500金)` - 高風險測試
  - `最大注 (1000金)` - 極限測試

- **🎯 投注**: 發送投注請求到服務器
- **🏆 領獎**: 獲取當前所有未結算球的獎勵

#### 第二行：🎮 模式控制
- **模式選擇下拉選單**:
  - `🟢 經典 (11洞, 穩定倍率)` - 低風險，穩定回報
  - `🟡 高倍 (17洞, 高風險)` - 中風險，高回報可能  
  - `🔴 極限 (17洞, 超高倍)` - 高風險，極高回報可能

- **🔄 切換**: 向服務器發送模式切換請求

#### 第三行：📊 當前狀態  
- 實時顯示：`當前模式 | 洞口數量 | 風險描述`
- 例如：`📊 當前: 🟢 經典模式 (11洞, 穩定倍率)`

#### 第四行：📈 統計資訊
- **📈 投注**: 累計投注次數
- **💹/📊/📉 勝率**: 獲勝百分比和 RTP (Return to Player)
  - 💹 = RTP > 100% (盈利狀態)  
  - 📊 = 50% ≤ RTP ≤ 100% (正常狀態)
  - 📉 = RTP < 50% (虧損狀態)
- **🔄**: 重置統計數據按鈕

#### 第五行：🔧 Debug 區域
- **🔧 Debug模式**: 開啟調試功能  
- **球**: 選擇指定球ID (0-2)
- **洞**: 選擇指定落入洞口 (0-16)
- **🎯**: 執行 Debug 投注 (作弊測試)

## 📝 使用流程

### 基本測試流程
1. **連接服務器**: 確保 GameHub 運行並連接成功
2. **選擇籌碼**: 根據測試需求選擇合適的投注等級
3. **投注**: 點擊 `🎯 投注` 發送請求
4. **觀察結果**: 查看輸出窗口的球路徑和結果
5. **領獎**: 點擊 `🏆 領獎` 獲取獎勵
6. **查看統計**: 觀察勝率和 RTP 變化

### 模式切換測試
1. **選擇新模式**: 在模式下拉選單中選擇目標模式
2. **切換模式**: 點擊 `🔄 切換` 
3. **確認狀態**: 檢查第三行狀態是否更新
4. **測試差異**: 在新模式下進行投注測試
5. **比較結果**: 觀察不同模式的 RTP 差異

### Debug 功能測試  
1. **啟用 Debug**: 勾選 `🔧 Debug模式`
2. **設定參數**: 選擇指定的球ID和洞口
3. **執行測試**: 點擊 `🎯` 執行指定結果投注
4. **驗證機制**: 確認服務器是否正確處理 Debug 請求

## ⚠️ 注意事項

### 服務器狀態要求
- ✅ **投注**: 必須在 `BetPeriod` (下注期) 狀態
- ✅ **模式切換**: 必須在 `BetPeriod` 且無未結算球
- ✅ **領獎**: 有未結算球時才有效果

### 錯誤處理
- `"Data error."` → 檢查遊戲狀態或參數格式
- `"Bring money over limit"` → 存在未結算球，先領獎
- 連接錯誤 → 確認 GameHub 服務器運行狀態

### 統計說明
- **勝率**: 獲獎次數 / 總投注次數
- **RTP**: 總獲獎金額 / 總投注金額 × 100%
- **趨勢**: 圖標顏色反映當前盈虧狀態

## 🔧 故障排除

### 常見問題
1. **模式切換失敗**
   - 確認當前處於下注期
   - 確認無未結算的球
   - 檢查網絡連接

2. **投注無反應**  
   - 檢查籌碼選擇是否有效
   - 確認服務器連接正常
   - 查看輸出窗口錯誤信息

3. **統計數據異常**
   - 點擊 🔄 重置統計
   - 重新連接服務器
   - 確認遊戲邏輯正確性

### Debug 選項
- **球ID**: 對應不同的隨機種子
- **洞口ID**: 直接指定落入的獎勵洞
- **作弊檢測**: 服務器可能有反作弊機制

## 📊 測試建議

### 完整測試序列
1. **基本功能**: 每個模式投注10次，記錄RTP
2. **邊界測試**: 最小注和最大注各5次  
3. **模式切換**: 在三種模式間循環切換
4. **Debug驗證**: 測試固定結果是否正確
5. **壓力測試**: 快速連續投注50次

### 數據收集
- 記錄每種模式的平均RTP
- 統計模式切換成功率
- 測量響應時間和延遲
- 驗證隨機性和公平性

---

**提示**: 使用優化版界面，所有功能都在單一控制台內，無需滾動即可完成全部測試操作！